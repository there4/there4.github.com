<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/assets/css/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/assets/css/there4.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/assets/css/animated_border.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <title>Generating JSONP with HiFi CMS</title>
  </head>

  <body>
    <div class="wrapper">

        <header>
          <h1><a href="http://there4.github.com">There4 Development</a></h1>
          <p>Simple, Lovable Applications</p>
        </header>

        <section id="main_content">
          <div id="post">
<h1>Generating JSONP with HiFi CMS</h1>
<p>I&#8217;ve been using <a href="http://www.gethifi.com/">HiFi CMS</a> in a variety of projects lately. I&#8217;m weary of
maintaining CMS platforms and have generally moved to <a href="http://pages.github.com/">GitHub Pages</a> and
HiFi. HiFi has proven to be remarkably flexible with it&#8217;s <a href="http://twig.sensiolabs.org/">Twig</a> driven
layout system, and I&#8217;d like to show how to leverage it to deliver articles
in JSONP format.</p>

<p>We needed a system to allow our support team to maintain a collection of
embedded help snippets. This allows our application to deliver context sensitive
help that we can maintain outside of the product release cycle. In short,
it keeps the developers from having to maintain help content, while allowing
us to draw help content deeper into the application.</p>

<p>One benefit of HiFi is that it has url driven page templates that use a smart
mime-type system to deliver the correct headers. If you create a template with
a <code>.js</code>, <code>.json</code>, or <code>.jsonp</code> extension, the site will deliver it with the
correct headers. This then means that you can deliver two different versions of
content based on url. We can deliver the posts as plain html for consumption
on the main support site, while allowing us to syndicate the content via
jsonp in our application.</p>

<ul>
<li><p><code>http://hifisite.example.com/help/topic/how-to-skate.html</code> will open the
how to skate article and render it with the <strong>html</strong> template.</p></li>
<li><p><code>http://hifisite.example.com/help/topic/how-to-skate.jsop</code> will open the
how to skate article and render it with the <strong>jsonp</strong> template.</p></li>
</ul>


<p><strong>HiFi Developer Editor:</strong><br/>
<img src="/assets/images/posts/hifi-jsonp.png" title="[231] [316] [HiFi Templates with JSONP output]" ></p>

<p>Here&#8217;s the content of the index.jsonp template:</p>

<div><script src='https://gist.github.com/4462076.js?file=index.jsonp'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>I&#8217;ve used this with <a href="http://backbonejs.org/">BackboneJS</a> to fetch help text from a
support article. We&#8217;re extending this model with the url to the article
and a default title.  Note in the <code>index.jsonp</code> file that we&#8217;ve used <code>jsonCallback</code>
as the parameter for the callback function name. This then means that our
ajax request looks like this:</p>

<div><script src='https://gist.github.com/4462137.js?file=jsonp.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>Now we&#8217;ve got a model that allows us to fetch blog posts from our hosted CMS,
while allowing us to continue to host the content on the primary site as well.</p>

</div>

<hr style="margin-top: 1em;">

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>27 Aug 2014</span> &raquo; <a href="/blog/2014/08/27/whats-your-front-end-workflow/">What's your front-end workflow</a></li>
    
      <li><span>26 Aug 2014</span> &raquo; <a href="/blog/2014/08/26/what-do-you-do-when-a-project-gets-stalled/">What do you do when a project gets stalled?</a></li>
    
      <li><span>25 Mar 2014</span> &raquo; <a href="/blog/2014/03/25/twitter-feeds-for-javascript-and-php/">Twitter Feeds for JavaScript and PHP</a></li>
    
  </ul>
</div>


<hr style="margin-top: 1em;">
<div id="comments">
  <h2>Comments</h2>
  <div id="disqus_thread"></div>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


<script type="text/javascript">
    var disqus_shortname = 'there4';
    (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


        </section>

        <footer>
          Content Copyright <a href="https://github.com/there4">There4 Development</a>.<br>
        </footer>

    </div>
    <script src="/assets/javascript/scale.fix.js"></script>
    <script type="text/javascript">
      var disqus_shortname = 'there4';
      (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-8504376-1']);
      _gaq.push(['_setDomainName', 'there4development.com']);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
